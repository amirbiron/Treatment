# ğŸ’Š Medicine Reminder Bot

×‘×•×˜ ×˜×œ×’×¨× ×—×›× ×œ×ª×–×›×•×¨×ª ×ª×¨×•×¤×•×ª ×¢× ×ª×›×•× ×•×ª ××ª×§×“××•×ª ×œ×–×§× ×™× ×•××˜×¤×œ×™×.

## ğŸŒŸ ×ª×›×•× ×•×ª ×¢×™×§×¨×™×•×ª

### ğŸ¯ ×ª×–×›×•×¨×•×ª ×—×›××•×ª
- â° ×ª×–×›×•×¨×•×ª ××•×˜×•××˜×™×•×ª ×‘×–××Ÿ ××“×•×™×§
- ğŸ”„ ××¤×©×¨×•×ª snooze ×©×œ ×”×ª×–×›×•×¨×•×ª
- ğŸ“± ×”×•×“×¢×•×ª Push ×‘×˜×œ×’×¨×
- ğŸ” ×ª×–×›×•×¨×•×ª ×—×•×–×¨×•×ª ×× ×œ× ×××•×©×¨

### ğŸ“Š ××¢×§×‘ ××œ××™
- ğŸ“¦ ××¢×§×‘ ×›××•×ª ×›×“×•×¨×™× ×‘××œ××™
- âš ï¸ ×”×ª×¨××•×ª ××œ××™ × ××•×š
- ğŸ“‰ ×™×¨×™×“×” ××•×˜×•××˜×™×ª ×‘××œ××™ ×‘×›×œ × ×˜×™×œ×”
- ğŸ“‹ ×”×¦×¢×•×ª ×œ×”×–×× ×” ××¨××©

### ğŸ“ ×™×•××Ÿ ×ª×•×¤×¢×•×ª ×œ×•×•××™
- ğŸ©º ×¨×™×©×•× ×ª×•×¤×¢×•×ª ×œ×•×•××™ ×™×•××™×•×ª
- ğŸ˜Š ××¢×§×‘ ××¦×‘ ×¨×•×— (×¡×§×œ×” 1-10)
- ğŸ“ˆ ×“×•×—×•×ª ×ª×§×•×¤×ª×™×™×
- ğŸ“§ ×©×œ×™×—×” ×œ×¨×•×¤×/××˜×¤×œ

### ğŸ‘¥ ××¦×‘ ××˜×¤×œ
- ğŸ‘¨â€âš•ï¸ ×”×•×¡×¤×ª ××˜×¤×œ×™× ×•×‘× ×™ ××©×¤×—×”
- ğŸ“Š ×“×™×•×•×—×™× ×™×•××™×™× ××•×˜×•××˜×™×™×
- ğŸš¨ ×”×ª×¨××•×ª ×¢×œ ×ª×¨×•×¤×•×ª ×©×œ× × ×œ×§×—×•
- ğŸ›ï¸ × ×™×”×•×œ ××¨×—×•×§ ×©×œ ×”×ª×¨×•×¤×•×ª

### ğŸ–¥ï¸ ×××©×§ ×™×“×™×“×•×ª×™
- ğŸ”˜ ×›×¤×ª×•×¨×™× ×’×“×•×œ×™× ×•×‘×¨×•×¨×™×
- ğŸ‡®ğŸ‡± ×××©×§ ×‘×¢×‘×¨×™×ª
- ğŸ‘µ ××•×ª×× ×œ×–×§× ×™×
- ğŸ“² ×¤×©×•×˜ ×œ×©×™××•×©

## ğŸ› ï¸ ×”×ª×§× ×” ×•×¤×¨×™×¡×”

### ×“×¨×™×©×•×ª ××§×“×™××•×ª

- Python 3.11+
- ×—×©×‘×•×Ÿ Telegram Bot (×™×¦×™×¨×” ×“×¨×š @BotFather)
- ×—×©×‘×•×Ÿ Render (×œ×¤×¨×™×¡×” ×‘×¢× ×Ÿ)

### ×”×ª×§× ×” ××§×•××™×ª

1. **×©×›×¤×•×œ ×”×¤×¨×•×™×§×˜:**
   ```bash
   git clone https://github.com/yourusername/medicine-reminder-bot.git
   cd medicine-reminder-bot
   ```

2. **×™×¦×™×¨×ª ×¡×‘×™×‘×” ×•×™×¨×˜×•××œ×™×ª:**
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   # ××•
   venv\Scripts\activate  # Windows
   ```

3. **×”×ª×§× ×ª ×ª×œ×•×™×•×ª:**
   ```bash
   pip install -r requirements.txt
   ```

4. **×”×’×“×¨×ª ××©×ª× ×™ ×¡×‘×™×‘×”:**
   ×¦×¨×• ×§×•×‘×¥ `.env` ×‘×ª×™×§×™×™×ª ×”×©×•×¨×©:
   ```env
   BOT_TOKEN=your_bot_token_here
   BOT_USERNAME=your_bot_username
   DEBUG=True
   LOG_LEVEL=INFO
   DEFAULT_TIMEZONE=Asia/Jerusalem
   ```

5. **×”×¤×¢×œ×ª ×”×‘×•×˜:**
   ```bash
   python main.py
   ```

### ğŸš€ ×¤×¨×™×¡×” ×‘-Render

1. **×”×›× ×ª ×”×¤×¨×•×™×§×˜:**
   - ×”×¢×œ×• ××ª ×”×§×•×“ ×œ-GitHub
   - ×•×“××• ×©×™×© ×§×•×‘×¥ `requirements.txt` ×•-`runtime.txt`

2. **×™×¦×™×¨×ª ×©×™×¨×•×ª ×‘-Render:**
   - ×”×™×›× ×¡×• ×œ-[Render Dashboard](https://dashboard.render.com)
   - ×œ×—×¦×• "New" â†’ "Web Service"
   - ×—×‘×¨×• ××ª ×”×¨×™×¤×•×–×™×˜×•×¨×™ ×-GitHub

3. **×”×’×“×¨×•×ª ×”×©×™×¨×•×ª:**
   ```
   Name: medicine-reminder-bot
   Environment: Python 3
   Build Command: pip install -r requirements.txt
   Start Command: python main.py
   ```

4. **×”×’×“×¨×ª ××©×ª× ×™ ×¡×‘×™×‘×” ×‘-Render:**
   ```
   BOT_TOKEN=your_bot_token_here
   BOT_USERNAME=your_bot_username
   WEBHOOK_URL=https://your-app-name.onrender.com
   DEBUG=False
   LOG_LEVEL=INFO
   DATABASE_URL=sqlite+aiosqlite:///./medicine_bot.db
   DEFAULT_TIMEZONE=Asia/Jerusalem
   ```

5. **×¤×¨×™×¡×”:**
   - ×œ×—×¦×• "Create Web Service"
   - Render ×™×‘× ×” ×•×™×¤×¨×•×¡ ××ª ×”×‘×•×˜ ××•×˜×•××˜×™×ª
   - ×”×‘×•×˜ ×™×¢×‘×•×“ ×‘××¦×‘ webhook

## âš™ï¸ ×”×’×“×¨×•×ª ××ª×§×“××•×ª

### ××©×ª× ×™ ×¡×‘×™×‘×” × ×•×¡×¤×™×

```env
# ×”×’×“×¨×•×ª ×ª×–×›×•×¨×•×ª
REMINDER_SNOOZE_MINUTES=5
MAX_REMINDER_ATTEMPTS=3

# ×”×’×“×¨×•×ª ××œ××™
DEFAULT_LOW_STOCK_THRESHOLD=5.0
INVENTORY_WARNING_DAYS=3

# ×”×’×“×¨×•×ª ×“×•×—×•×ª
WEEKLY_REPORT_DAY=0  # 0=×™×•× ×‘', 6=×™×•× ×'
WEEKLY_REPORT_TIME=09:00
CAREGIVER_DAILY_REPORT_TIME=20:00

# ×”×’×“×¨×•×ª ×××©×§
MAX_MEDICINES_PER_PAGE=5
KEYBOARD_TIMEOUT_SECONDS=300
MAX_CAREGIVERS_PER_USER=5
```

### ×”×’×“×¨×ª ×‘×•×˜ ×˜×œ×’×¨×

1. **×™×¦×™×¨×ª ×‘×•×˜:**
   - ×©×œ×—×• `/newbot` ×œ-@BotFather
   - ×‘×—×¨×• ×©× ×•×™×•×–×¨× ×™×™× ×œ×‘×•×˜
   - ×©××¨×• ××ª ×”×˜×•×§×Ÿ ×©×ª×§×‘×œ×•

2. **×”×’×“×¨×•×ª × ×•×¡×¤×•×ª (××•×¤×¦×™×•× ×œ×™):**
   ```
   /setdescription - ×ª×™××•×¨ ×”×‘×•×˜
   /setabouttext - ××™×“×¢ ×¢×œ ×”×‘×•×˜
   /setuserpic - ×ª××•× ×ª ×¤×¨×•×¤×™×œ
   /setcommands - ×¨×©×™××ª ×¤×§×•×“×•×ª
   ```

3. **×¨×©×™××ª ×¤×§×•×“×•×ª ××•××œ×¦×ª:**
   ```
   start - ×”×ª×—×œ×ª ×”×©×™××•×©
   help - ×”×¦×’×ª ×¢×–×¨×”
   add_medicine - ×”×•×¡×¤×ª ×ª×¨×•×¤×”
   my_medicines - ×”×¦×’×ª ×”×ª×¨×•×¤×•×ª
   next_reminders - ×ª×–×›×•×¨×•×ª ×§×¨×•×‘×•×ª
   snooze - ×“×—×™×™×ª ×ª×–×›×•×¨×ª
   log_symptoms - ×¨×™×©×•× ×ª×•×¤×¢×•×ª ×œ×•×•××™
   weekly_report - ×“×•×— ×©×‘×•×¢×™
   settings - ×”×’×“×¨×•×ª
   ```

## ğŸ—ï¸ ××‘× ×” ×”×¤×¨×•×™×§×˜

```
medicine-reminder-bot/
â”œâ”€â”€ main.py                 # × ×§×•×“×ª ×›× ×™×¡×” ×¨××©×™×ª
â”œâ”€â”€ config.py              # ×”×’×“×¨×•×ª ×•×”×•×“×¢×•×ª
â”œâ”€â”€ database.py            # ××•×“×œ×™× ×•× ×”×œ×™ DB
â”œâ”€â”€ scheduler.py           # ×× ×•×¢ ×”×ª×–××•× ×™×
â”œâ”€â”€ requirements.txt       # ×ª×œ×•×™×•×ª Python
â”œâ”€â”€ runtime.txt           # ×’×¨×¡×ª Python
â”œâ”€â”€ README.md             # ××“×¨×™×š ×–×”
â”œâ”€â”€ handlers/             # ××˜×¤×œ×™ ×¤×§×•×“×•×ª
â”‚   â”œâ”€â”€ medicine_handler.py
â”‚   â”œâ”€â”€ reminder_handler.py
â”‚   â”œâ”€â”€ symptoms_handler.py
â”‚   â”œâ”€â”€ caregiver_handler.py
â”‚   â””â”€â”€ reports_handler.py
â””â”€â”€ utils/               # ×›×œ×™ ×¢×–×¨
    â”œâ”€â”€ keyboards.py     # ×ª×¤×¨×™×˜×™× ×•×›×¤×ª×•×¨×™×
    â”œâ”€â”€ helpers.py       # ×¤×•× ×§×¦×™×•×ª ×¢×–×¨
    â””â”€â”€ validators.py    # ×‘×“×™×§×•×ª ×ª×§×™× ×•×ª
```

## ğŸ”§ ×¤×™×ª×•×— ×•×ª×—×–×•×§×”

### ×”×¤×¢×œ×” ×‘××¦×‘ ×¤×™×ª×•×—

```bash
# ×”×’×“×¨×ª DEBUG=True ×‘-.env
DEBUG=True
LOG_LEVEL=DEBUG

# ×”×¤×¢×œ×ª ×”×‘×•×˜
python main.py
```

### ×‘×“×™×§×•×ª

```bash
# ×”×¨×¦×ª ×‘×“×™×§×•×ª (×›××©×¨ ×™×ª×•×•×¡×¤×•)
python -m pytest tests/

# ×‘×“×™×§×ª ××™×›×•×ª ×§×•×“
flake8 .
black .
```

### ×œ×•×’×™× ×•××¢×§×‘

×”×‘×•×˜ ×›×•×œ×œ ×œ×•×’×™× ××¤×•×¨×˜×™×:
- ğŸ“Š ×¤×¢×™×œ×•×ª ××©×ª××©×™×
- âš ï¸ ×©×’×™××•×ª ×•×ª×§×œ×•×ª
- ğŸ“ˆ ×¡×˜×˜×™×¡×˜×™×§×•×ª ×©×™××•×©
- ğŸ” ×“×™×‘×•×’ (×‘××¦×‘ ×¤×™×ª×•×—)

### ×’×™×‘×•×™×™×

**×—×©×•×‘:** ×”×§×¤×™×“×• ×œ×’×‘×•×ª ××ª ××¡×“ ×”× ×ª×•× ×™×:
```bash
# ×’×™×‘×•×™ ××§×•××™
cp medicine_bot.db backup_$(date +%Y%m%d).db

# ×’×™×‘×•×™ ×¢× SQLite
sqlite3 medicine_bot.db ".backup backup.db"
```

## ğŸ¤ ×ª×¨×•××” ×œ×¤×¨×•×™×§×˜

1. Fork ×”×¤×¨×•×™×§×˜
2. ×™×¦×¨×• branch ×—×“×© (`git checkout -b feature/AmazingFeature`)
3. ×‘×¦×¢×• commit (`git commit -m 'Add some AmazingFeature'`)
4. Push ×œ-branch (`git push origin feature/AmazingFeature`)
5. ×¤×ª×—×• Pull Request

## ğŸ› ×“×™×•×•×— ×‘×¢×™×•×ª

×× ××¦××ª× ×‘×¢×™×”:
1. ×‘×“×§×• ×× ×”×‘×¢×™×” ×›×‘×¨ ×“×•×•×—×” ×‘-Issues
2. ×¦×¨×• Issue ×—×“×© ×¢× ×¤×¨×˜×™× ××œ××™×
3. ×›×œ×œ×• ×œ×•×’×™× ×•×©×’×™××•×ª ×× ×™×©
4. ×ª××¨×• ××™×š ×œ×©×—×–×¨ ××ª ×”×‘×¢×™×”

## ğŸ“‹ ×××¤×™×™× ×™× ××ª×•×›× × ×™×

- [ ] ğŸŒ ×ª××™×›×” ×‘×©×¤×•×ª × ×•×¡×¤×•×ª
- [ ] ğŸ“Š ×“×©×‘×•×¨×“ ×•×•×‘ ×œ××˜×¤×œ×™×
- [ ] ğŸ”” ×”×•×“×¢×•×ª SMS (×‘× ×•×¡×£ ×œ×˜×œ×’×¨×)
- [ ] ğŸ“± ××¤×œ×™×§×¦×™×” × ×™×™×“×ª
- [ ] ğŸ¥ ××™× ×˜×’×¨×¦×™×” ×¢× ××¢×¨×›×•×ª ×‘×¨×™××•×ª
- [ ] ğŸ¤– ×‘×™× ×” ××œ××›×•×ª×™×ª ×œ×–×™×”×•×™ ×ª×¨×•×¤×•×ª
- [ ] ğŸ“ˆ ×× ×œ×™×˜×™×§×¡ ××ª×§×“××ª

## âš ï¸ ×”×’×‘×œ×•×ª ×•××—×¨×™×•×ª

- ×”×‘×•×˜ ××™×•×¢×“ ×œ×¢×–×¨×” ×‘×œ×‘×“ ×•××™× ×• ×ª×—×œ×™×£ ×œ×™×™×¢×•×¥ ×¨×¤×•××™
- ×”×©×ª××©×• ×‘×‘×•×˜ ×‘××—×¨×™×•×ª×›×
- ×”×ª×™×™×¢×¦×• ×¢× ×¨×•×¤× ×œ×¤× ×™ ×©×™× ×•×™×™× ×‘×˜×™×¤×•×œ
- ×”×‘×•×˜ ××™× ×• ××—×•×‘×¨ ×œ××¢×¨×›×•×ª ×¨×¤×•××™×•×ª ×¨×©××™×•×ª

## ğŸ“ ×ª××™×›×”

- ğŸ“§ Email: support@example.com
- ğŸ’¬ Telegram: @SupportBot
- ğŸŒ ××ª×¨: https://example.com
- ğŸ“š ×“×•×§×•×× ×˜×¦×™×”: https://docs.example.com

## ğŸ“œ ×¨×™×©×™×•×Ÿ

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## ğŸ™ ×ª×•×“×•×ª

- Python Telegram Bot Library
- APScheduler
- SQLAlchemy
- Render Platform
- ×›×œ ×”×ª×•×¨××™× ×œ×¤×¨×•×™×§×˜

---

<div align="center">

**ğŸ’Š ×‘×•×˜ ×ª×–×›×•×¨×ª ×”×ª×¨×•×¤×•×ª - ×“×•××’ ×œ×‘×¨×™××•×ª ×©×œ×›× 24/7**

Made with â¤ï¸ in Israel

</div>

## Revert Guide (Rollback to a stable baseline)

If recent deploys introduced regressions, you can revert to a stable state prior to the last problematic merges.

- Last two merges likely related to current issues:
  - PR #25: `68f8752` â€” Merge pull request #25 (debug-bot-errors-in-logs)
  - PR #23: `bf705a7` â€” Merge pull request #23 (fix-appointment-booking)
- Stable baseline before these merges:
  - Post-PR #22 merge: `7f8f1cb`

### Option A: Revert the problematic merges (preferred first)

Use the merge revert (-m 1) to undo the merges cleanly, in a new branch:

```bash
# Create a hotfix branch
git checkout -b hotfix/revert-problematic-merges

# Revert PR #25
git revert -m 1 68f8752

# Revert PR #23 (if still needed)
git revert -m 1 bf705a7

# Resolve conflicts if any, commit, push and open a PR
```

### Option B: Branch from the stable baseline

If you prefer to branch from the last known-good commit and re-apply only desired changes:

```bash
git checkout -b hotfix/from-7f8f1cb 7f8f1cb
# Build/test, then push and open a PR
```

### Notes
- After reverting, rebuild and verify: scheduler start/stop, webhook handling, medicines edit flows, and symptoms logging.
- If you do not have terminal access, a maintainer can execute the above steps on your behalf. This file documents the exact commit IDs so the operation can be performed safely later.
